
# 🦀 Rust Async Port Scanner (简易端口扫描器)

这是一个基于 Rust `Tokio` 异步运行时编写的高性能 TCP 端口扫描器。它能够并发扫描指定 IP 的全端口（1-65535），并利用信号量（Semaphore）控制并发压力。

## ✨ 功能特性

- **极速扫描**：利用 Rust 的异步非阻塞 I/O (Tokio) 进行快速探测。
- **并发控制**：通过信号量精确控制并发线程数，避免系统资源耗尽。
- **全端口覆盖**：默认扫描 1 至 65535 所有端口。
- **结果排序**：扫描完成后自动对开放端口进行排序并输出。
- **进度显示**：实时显示当前扫描进度。

## 📦 依赖说明

请在项目的 `Cargo.toml` 中添加 `tokio` 依赖：

```toml
[dependencies]
tokio = { version = "1.0", features = ["full"] }

```

## 🚀 快速开始

### 1. 编译项目

建议使用 Release 模式编译以获得最佳性能：

```bash
cargo build --release

```

### 2. 查看帮助

```bash
cargo run -- -h

```

### 3. 运行扫描

**注意**：根据代码逻辑，必须提供完整的 **3个参数** 才能正常运行，否则程序会因参数不足而报错。

**命令格式：**

```bash
# cargo run -- <任意Flag> <目标IP> <并发线程数>
./target/release/port_scanner -scan 192.168.1.1 2000

```

**参数解释：**

1. **Flag** (`args[1]`): 任意字符串标识（例如 `-j` 或 `-scan`）。
2. **IP Addr** (`args[2]`): 目标主机的 IP 地址（例如 `127.0.0.1`）。
3. **Threads** (`args[3]`): 并发任务数量（建议 `1000` - `4000`，取决于网络环境）。

### 示例

扫描本地回环地址，使用 4000 个并发任务：

```bash
cargo run -- -j 127.0.0.1 4000

```

## 🛠️ 常见问题

* **为什么程序会 Panic？**
如果运行命令时参数少于 3 个（不包含程序名），程序会因索引越界而 Panic。请务必完整填写 `<flag> <ip> <threads>`。
* **扫描速度**
扫描速度取决于 `Threads` 参数的大小以及 `timeout` 设置（源码中默认为 300ms）。

## 📄 许可证

此项目仅供学习和安全研究使用。
